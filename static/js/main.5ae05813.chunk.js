(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),s=a.n(c),o=(a(16),a(1)),l=a(5),i=a(6),u=a(8),m=a(7),f=a(9),p=function(){return n.a.createElement("header",{className:"app-header"},n.a.createElement("h1",{className:"app-logo"},"JSON Counter 4000"),n.a.createElement("p",{className:"app-description"},"Best way to count objects in your JSON"))},d=function(e){var t=e.type,a=void 0===t?"button":t,r=e.onClick,c=void 0===r?function(){}:r,s=e.url,l=e.inputId,i=e.baseClass,u=void 0===i?"button":i,m=e.modifier,f=e.text,p=e.icon,d=e.postIcon,v=e.disabled,E=e.title,b="".concat(u).concat(function(e){if(!e)return"";var t;if("string"===typeof e?t=e.split(","):Array.isArray(e)&&(t=Object(o.a)(e)),!t||!t.length)return"";var a=t.map(function(e){return"".concat(u,"_").concat(e.trim())});return" ".concat(a.join(" "))}(m)),_=function(e){var t="".concat(u,"__icon");return n.a.createElement("span",{className:"".concat(t," ").concat(t,"_").concat(e)})},N=n.a.createElement("span",{className:"".concat(u,"__inner")},p&&_(p),f&&n.a.createElement("span",{className:"".concat(u,"__text")},f),f&&d&&_(d));switch(a){case"link":return n.a.createElement("a",{title:E,className:b,href:s},N);case"label":return n.a.createElement("label",{title:E,className:b,htmlFor:l},N);default:return n.a.createElement("button",{title:E,type:a,className:b,disabled:v,onClick:c},N)}},v=function(e){var t=e.errors,a=e.clearErrors;return n.a.createElement("div",{className:"error-bar"},n.a.createElement("ol",{className:"error-bar__content"},t.map(function(e){var t=e.key,a=e.text;return n.a.createElement("li",{key:t,className:"error-bar__item"},n.a.createElement("strong",null,"Error:")," ",a)})),n.a.createElement(d,{baseClass:"error-bar-reset",title:"Clear errors",onClick:a}))},E=a(2),b=function(e){var t,a=e.setError,c=e.setResult,s=e.maxFileSize,o=void 0===s?1048576:s,l=e.haveErrors,i=e.clearErrors,u=(o/1024/1024).toFixed(0),m=Object(r.useState)(!1),f=Object(E.a)(m,2),p=f[0],v=f[1],b=Object(r.useState)(!1),_=Object(E.a)(b,2),N=_[0],h=_[1],y=function(e){e.stopPropagation(),e.preventDefault()},w=function(e){e&&Array.from(e).map(function(e,r){var n=e.name,s=e.size,l='"'.concat(n,"\" don't have .json or .txt format."),i='"'.concat(n,'" is grater than ').concat(u,"mb"),m='uploaded file "'.concat(n,"\" can't be parsed as JSON"),f="can't upload \"".concat(n,'"'),p="file ".concat(n," is empty"),d=function(e){var t={text:e,key:"".concat(n,"_").concat(r)};a(t)},E=n.split("."),b=E[E.length-1];if("json"===b||"txt"===b)if(s>=o)d(i);else{var _=new FileReader;_.onloadstart=function(){t&&v(!0)},_.onloadend=function(){t&&v(!1);var e=!1;try{var a=_.result;a?e=JSON.parse(a.toString()):""===a&&d(p)}catch(r){return void d(m)}e&&c({name:n,body:e})},_.onerror=function(){d(f)},_.readAsText(e)}else d(l)})};Object(r.useEffect)(function(){return t=!0,function(){t=!1}},[]);return n.a.createElement("form",{onSubmit:function(e){e.preventDefault()},onDragEnter:function(e){y(e),h(!0)},onDragOver:function(e){y(e)},onDragLeave:function(e){y(e),h(!1)},onDrop:function(e){if(y(e),t&&h(!1),!p){i();var a=e.dataTransfer.files;w(a)}},className:"drop-box".concat(N&&!p?"".concat(" drop-box_","drag-over"):l?"".concat(" drop-box_","error"):"")},p&&n.a.createElement("div",{className:"drop-box__overlay"},"Loading..."),n.a.createElement("input",{tabIndex:0,onChange:function(e){i(),w(e.target.files)},type:"file",id:"file",multiple:!0,className:"drop-box__input"}),n.a.createElement(d,{type:"label",inputId:"file",text:"Choose a file"}),n.a.createElement("p",{className:"drop-box__description"},"File have to be JSON in .json/.txt format and less than"," ",u,"mb"))},_=function(e){var t=e.content,a=e.resetResult;return n.a.createElement("div",{className:"result-view"},n.a.createElement("h2",{className:"result-view-caption"},"Here is a counting result:"),n.a.createElement("ul",{className:"result-view-list"},t.map(function(e){var t=e.name,a=function(e){var t=0,a=[],r=function(e){t+=1,a=[].concat(Object(o.a)(a),[e])};return function e(t){Object.keys(t).forEach(function(a){var n=t[a];"object"===typeof n&&null!==n&&(r(a.toString()),e(n))})}(e),{counter:t,keys:a}}(e.body),r=a.keys.join("\n");return n.a.createElement("li",{key:t,className:"result-view-item"},n.a.createElement("div",{className:"result-view-item__summary"},n.a.createElement("div",{className:"result-view-item__summary-row"},n.a.createElement("span",{className:"result-view-item__label"},"File name:"),n.a.createElement("span",{className:"result-view-item__name"},t)),n.a.createElement("div",{className:"result-view-item__summary-row"},n.a.createElement("span",{className:"result-view-item__label"},"Objects count:"),n.a.createElement("span",{className:"result-view-item__count"},a.counter))),n.a.createElement("div",{className:"result-view-item__details"},n.a.createElement("span",{className:"result-view-item__label"},"Keys:"),n.a.createElement("textarea",{readOnly:!0,className:"result-view-item__keys-list",defaultValue:r})))})),n.a.createElement("div",{className:"result-view-footer"},n.a.createElement(d,{text:"Count something else",onClick:a})))},N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={errors:[],files:[]},a.setError=function(e){a.setState(function(t){return{errors:[].concat(Object(o.a)(t.errors),[e])}})},a.clearErrors=function(){a.setState({errors:[]})},a.setFiles=function(e){a.setState(function(t){return{files:[].concat(Object(o.a)(t.files),[e])}})},a.resetResult=function(){a.setState({errors:[],files:[]})},a.dragHandler=function(e){e.stopPropagation(),e.preventDefault(),a.resetResult()},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.files,r=!!t.length,c=!!a.length;return n.a.createElement("div",{className:"app-wrapper",onDragEnter:this.dragHandler},n.a.createElement(p,null),n.a.createElement("div",{className:"app-body"},r&&n.a.createElement(v,{errors:t,clearErrors:this.clearErrors}),c?n.a.createElement(_,{content:a,resetResult:this.resetResult}):n.a.createElement(b,{setError:this.setError,setResult:this.setFiles,haveErrors:r,clearErrors:this.clearErrors})))}}]),t}(r.Component);s.a.render(n.a.createElement(N,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.5ae05813.chunk.js.map